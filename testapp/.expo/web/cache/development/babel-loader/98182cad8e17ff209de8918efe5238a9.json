{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\82109\\\\Desktop\\\\Activate\\\\testapp\\\\Main.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as Location from 'expo-location';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nexport default function Main(_ref) {\n  var phoneNumber = _ref.phoneNumber,\n      age = _ref.age,\n      gender = _ref.gender;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMsg = _useState4[0],\n      setErrorMsg = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      latitude = _useState6[0],\n      setLatitude = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      longitude = _useState8[0],\n      setLongitude = _useState8[1];\n\n  var url = 'https://3lonbz1xr9.execute-api.ap-northeast-2.amazonaws.com/post/act1';\n  useEffect(function () {\n    (function _callee() {\n      var _await$Location$reque, status, location;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestForegroundPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context.sent;\n              status = _await$Location$reque.status;\n\n              if (!(status !== 'granted')) {\n                _context.next = 7;\n                break;\n              }\n\n              setErrorMsg('Permission to access location was denied');\n              return _context.abrupt(\"return\");\n\n            case 7:\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 9:\n              location = _context.sent;\n              setLocation(location);\n              setLatitude(String(location['coords']['latitude']));\n              setLongitude(String(location['coords']['longitude']));\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var getLocation = function getLocation() {\n    var _location;\n\n    return _regeneratorRuntime.async(function getLocation$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n          case 3:\n            _location = _context2.sent;\n            setLocation(_location);\n            setLatitude(String(_location['coords']['latitude']));\n            setLongitude(String(_location['coords']['longitude']));\n            postData();\n            _context2.next = 13;\n            break;\n\n          case 10:\n            _context2.prev = 10;\n            _context2.t0 = _context2[\"catch\"](0);\n            Alert.alert(\"위치정보를 가져올 수 없습니다.\");\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  };\n\n  var postData = function postData() {\n    var data, response;\n    return _regeneratorRuntime.async(function postData$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            data = {\n              \"phoneNumber\": \"01093532680\",\n              \"age\": \"24\",\n              \"gender\": \"M\",\n              \"latitude\": latitude,\n              \"longitude\": longitude\n            };\n            _context3.prev = 1;\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(axios.post(url, data));\n\n          case 4:\n            response = _context3.sent;\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](1);\n            console.log(_context3.t0);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[1, 7]], Promise);\n  };\n\n  var text = '현재 위치정보';\n\n  if (errorMsg) {\n    text = errorMsg;\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, text), React.createElement(Text, {\n    style: styles.paragraph,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, latitude), React.createElement(Text, {\n    style: styles.paragraph,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, longitude), React.createElement(Text, {\n    style: styles.paragraph,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, phoneNumber), React.createElement(Text, {\n    style: styles.paragraph,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"\\uB098\\uC774 : \", age), React.createElement(Text, {\n    style: styles.paragraph,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, \"\\uC131\\uBCC4 : \", gender), React.createElement(TouchableOpacity, {\n    avtiveOpacity: 0.8,\n    style: styles.button,\n    onPress: getLocation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"\\uC704\\uCE58 \\uC815\\uBCF4 \\uC804\\uC1A1\")));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 3,\n    backgroundColor: 'white',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  title: {\n    fontSize: 50,\n    color: 'blue'\n  },\n  paragraph: {\n    fontSize: 30,\n    color: 'black'\n  },\n  button: {\n    width: 200,\n    height: 80,\n    backgroundColor: \"#123abc\",\n    borderRadius: 4.5,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  buttonText: {\n    color: \"white\",\n    fontSize: 30\n  }\n});","map":{"version":3,"sources":["C:/Users/82109/Desktop/Activate/testapp/Main.js"],"names":["React","Location","useState","useEffect","axios","Main","phoneNumber","age","gender","location","setLocation","errorMsg","setErrorMsg","latitude","setLatitude","longitude","setLongitude","url","requestForegroundPermissionsAsync","status","getCurrentPositionAsync","String","getLocation","postData","Alert","alert","data","post","response","console","log","text","styles","container","title","paragraph","button","buttonText","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","fontSize","color","width","height","borderRadius"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { TouchableOpacity, StyleSheet, Text, View } from 'react-native';\r\nimport { Alert } from \"react-native\";\r\nimport * as Location from 'expo-location';\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function Main({phoneNumber, age, gender}) {\r\n  const [location, setLocation] = useState(null);\r\n  const [errorMsg, setErrorMsg] = useState(null);\r\n  const [latitude, setLatitude] = useState(null);\r\n  const [longitude, setLongitude] = useState(null);\r\n  const url = 'https://3lonbz1xr9.execute-api.ap-northeast-2.amazonaws.com/post/act1'\r\n  // activate_1 dynamoDB로 데이터를 보내기 위한 api\r\n\r\n\r\n  useEffect(() => { // 처음 실행됐을 때\r\n    (async () => {\r\n      // 위치정보 권한을 요청한다.\r\n      let { status } = await Location.requestForegroundPermissionsAsync();\r\n      if (status !== 'granted') {\r\n        setErrorMsg('Permission to access location was denied');\r\n        return;\r\n      }\r\n\r\n      // 현재 위치를 받아온다.\r\n      let location = await Location.getCurrentPositionAsync({});\r\n      setLocation(location);\r\n      setLatitude(String(location['coords']['latitude']));\r\n      setLongitude(String(location['coords']['longitude']));\r\n    })();\r\n  }, []);\r\n\r\n  //추가로 현재 위치를 받아오는 함수\r\n  const getLocation = async () => {\r\n  \r\n    try {\r\n      // 현재 위치 정보를 받아온다.\r\n      const location = await Location.getCurrentPositionAsync();\r\n      setLocation(location)\r\n      //dynamoDB에 위치정보를 문자열로 받기로 설정해놨기 때문에 문자열로 변환\r\n      // 숫자값으로 바꿀지 고민중...\r\n      setLatitude(String(location['coords']['latitude']));\r\n      setLongitude(String(location['coords']['longitude']));\r\n      //현재 위치를 dynamoDB로 전송하는 함수 실행\r\n      postData();\r\n    } catch (e) {\r\n      Alert.alert(\"위치정보를 가져올 수 없습니다.\");\r\n    }\r\n    \r\n  };\r\n  // dynamoDB로 데이터를 전송하는 함수\r\n  const postData = async () => {\r\n    //전송할 데이터, 휴대폰번호, 나이, 성별 등은 로그인하면 바뀔수 있게 나중에 변수로 설정하자.\r\n    const data = {\r\n      \"phoneNumber\": \"01093532680\",\r\n      \"age\": \"24\",\r\n      \"gender\": \"M\",\r\n      \"latitude\": latitude,\r\n      \"longitude\": longitude,\r\n    }\r\n    try{\r\n      //api에 post 요청.(데이터 전송한다는 의미)\r\n      const response = await axios.post(url, data);\r\n    } catch (e){\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n  let text = '현재 위치정보';\r\n  if (errorMsg) { // 이거 지울까말까 고민중\r\n    text = errorMsg;\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>{text}</Text>\r\n      <Text style={styles.paragraph}>{latitude}</Text>\r\n      <Text style={styles.paragraph}>{longitude}</Text>\r\n      <Text style={styles.paragraph}>{phoneNumber}</Text>\r\n      <Text style={styles.paragraph}>나이 : {age}</Text>\r\n      <Text style={styles.paragraph}>성별 : {gender}</Text>\r\n      <TouchableOpacity avtiveOpacity={0.8} style={styles.button} onPress={getLocation} >\r\n        <Text style={styles.buttonText}>위치 정보 전송</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 3,\r\n    backgroundColor: 'white',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  title: {\r\n    fontSize: 50,\r\n    color: 'blue'\r\n  },\r\n  paragraph: {\r\n    fontSize: 30,\r\n    color: 'black'\r\n  },\r\n  button: {\r\n    width: 200,\r\n    height: 80,\r\n    backgroundColor: \"#123abc\",\r\n    borderRadius: 4.5,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  buttonText: {\r\n    color: \"white\",\r\n    fontSize: 30,\r\n  }\r\n});"]},"metadata":{},"sourceType":"module"}